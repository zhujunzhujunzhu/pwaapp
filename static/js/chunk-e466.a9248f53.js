(this["webpackJsonp"] = this["webpackJsonp"] || []).push([["chunk-e466"],{

/***/ "6OrZ":
/*!*******************************************************************!*\
  !*** ./src/views/project/BIM/detailedModel/components/bisect.vue ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bisect.vue?vue&type=template&id=fa2f0456& */ "sUqz");
/* harmony import */ var _bisect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bisect.vue?vue&type=script&lang=js& */ "6zjs");
/* empty/unused harmony star reexport *//* harmony import */ var _bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bisect.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss& */ "8V6l");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "KHd+");






/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _bisect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__["render"],
  _bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

component.options.__file = "bisect.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "6zjs":
/*!********************************************************************************************!*\
  !*** ./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_happypack_loader_js_id_happyBabel_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/happypack/loader.js?id=happyBabel!../../../../../../node_modules/vue-loader/lib??vue-loader-options!./bisect.vue?vue&type=script&lang=js& */ "PHnJ");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_happypack_loader_js_id_happyBabel_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "8V6l":
/*!***************************************************************************************************************************!*\
  !*** ./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss& ***!
  \***************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-0!../../../../../../node_modules/css-loader??ref--11-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib??ref--11-2!../../../../../../node_modules/sass-loader/lib/loader.js??ref--11-3!../../../../../../node_modules/vue-loader/lib??vue-loader-options!./bisect.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss& */ "ADFs");
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_0_node_modules_css_loader_index_js_ref_11_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_2_node_modules_sass_loader_lib_loader_js_ref_11_3_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "ADFs":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-0!./node_modules/css-loader??ref--11-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib??ref--11-2!./node_modules/sass-loader/lib/loader.js??ref--11-3!./node_modules/vue-loader/lib??vue-loader-options!./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "H0s4":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=template&id=fa2f0456& ***!
  \********************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"bisectDiv drawer-wrap"},[_c('div',{staticClass:"flex tDiv"},[_c('i',{staticClass:"icon iconfont iconZzhou",class:{active: _vm.currentType=='z'},attrs:{"title":"Z剖面"},on:{"click":function($event){return _vm.startPm('z', 'Z剖面')}}}),_vm._v(" "),_c('i',{staticClass:"icon iconfont iconYzhou",class:{active: _vm.currentType=='y'},attrs:{"title":"Y剖面"},on:{"click":function($event){return _vm.startPm('y', 'Y剖面')}}}),_vm._v(" "),_c('i',{staticClass:"icon iconfont iconXzhou",class:{active: _vm.currentType=='x'},attrs:{"title":"X剖面"},on:{"click":function($event){return _vm.startPm('x', 'X剖面')}}}),_vm._v(" "),_c('i',{staticClass:"icon iconfont iconzidingyipoumian",class:{active: _vm.currentType=='zdy'},attrs:{"title":"自定义剖面"},on:{"click":function($event){return _vm.startPm('zdy', '自定义剖面')}}})]),_vm._v(" "),_c('label',{staticClass:"titleLabel"},[_vm._v(_vm._s(_vm.title))]),_vm._v(" "),_c('div',{staticClass:"flex silderDiv"},[_c('label',{staticClass:"lLabel"},[_vm._v("d")]),_vm._v(" "),_c('el-slider',{staticClass:"silder",attrs:{"input-size":"mini","min":-500,"max":500,"show-input":""},on:{"change":_vm.startMeasure},model:{value:(_vm.dSlider),callback:function ($$v) {_vm.dSlider=$$v},expression:"dSlider"}})],1),_vm._v(" "),(_vm.currentType=='zdy')?_c('div',{staticClass:"flex silderDiv"},[_c('label',{staticClass:"lLabel"},[_vm._v("x")]),_vm._v(" "),_c('el-slider',{staticClass:"silder",attrs:{"step":0.05,"input-size":"mini","min":-1,"max":1,"show-input":""},on:{"change":_vm.startMeasure},model:{value:(_vm.xSlider),callback:function ($$v) {_vm.xSlider=$$v},expression:"xSlider"}})],1):_vm._e(),_vm._v(" "),(_vm.currentType=='zdy')?_c('div',{staticClass:"flex silderDiv"},[_c('label',{staticClass:"lLabel"},[_vm._v("y")]),_vm._v(" "),_c('el-slider',{staticClass:"silder",attrs:{"input-size":"mini","step":0.05,"min":-1,"max":1,"show-input":""},on:{"change":_vm.startMeasure},model:{value:(_vm.ySlider),callback:function ($$v) {_vm.ySlider=$$v},expression:"ySlider"}})],1):_vm._e(),_vm._v(" "),(_vm.currentType=='zdy')?_c('div',{staticClass:"flex silderDiv"},[_c('label',{staticClass:"lLabel"},[_vm._v("z")]),_vm._v(" "),_c('el-slider',{staticClass:"silder",attrs:{"step":0.05,"input-size":"mini","min":-1,"max":1,"show-input":""},on:{"change":_vm.startMeasure},model:{value:(_vm.zSlider),callback:function ($$v) {_vm.zSlider=$$v},expression:"zSlider"}})],1):_vm._e(),_vm._v(" "),_c('div',{staticClass:"flex overturnDiv"},[_c('label',{staticClass:"lLabel flex1"},[_vm._v("翻转剖面")]),_vm._v(" "),_c('el-switch',{staticStyle:{"margin-right":"12px"},attrs:{"active-color":"#f75223","inactive-color":"#cccccc"},on:{"change":_vm.switchClip},model:{value:(_vm.isOveturn),callback:function ($$v) {_vm.isOveturn=$$v},expression:"isOveturn"}})],1),_vm._v(" "),_c('div',{staticClass:"btnDiv"},[(!_vm.isStart)?_c('el-button',{staticClass:"btn",attrs:{"size":"mini"},on:{"click":_vm.startMeasure}},[_vm._v("开启")]):_vm._e(),_vm._v(" "),(_vm.isStart)?_c('el-button',{staticClass:"btn",attrs:{"size":"mini"},on:{"click":_vm.quitMeasure}},[_vm._v("退出")]):_vm._e()],1),_vm._v(" "),_c('label',{staticClass:"btLabel"},[_vm._v("\n    "+_vm._s(_vm.currentType == 'zdy' ?
    '提示:X、Y、Z值决定初始切面旋转角度，取值范围为-1到1。d为现状剖切面相对于初始剖切面的偏移量，当调整d的滚动条不能继续平移剖切面时，请在d后输入框输入数值让剖切面产生最大化的偏移' : '提示:选择"翻转剖面"，可对模型进行反向剖切。d为现状剖切面相对于初始剖切面的偏移量，当调整d的滚动条不能继续平移剖切面时，请在d后输入框输入数值让剖切面产生最大化的偏移。')+"\n  ")])])}
var staticRenderFns = []



/***/ }),

/***/ "PHnJ":
/*!***********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/happypack/loader.js?id=happyBabel!./node_modules/vue-loader/lib??vue-loader-options!./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! babel-runtime/helpers/extends */ "QbLZ");
/* harmony import */ var babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vuex */ "L2JU");

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/* harmony default export */ __webpack_exports__["default"] = ({
  name: 'BisectModel',
  props: {},
  data: function data() {
    return {
      currentType: 'z', // x,y,z,zdy
      isStart: false, // 是否开启剖面
      title: 'X剖面',
      dSlider: 0,
      xSlider: 0,
      ySlider: 0,
      zSlider: -1,
      marks: [{ '-500': -500, 500: 500 }],
      isOveturn: true,
      lastClippingPlanCenter: null,
      currentClippingPlanCenter: null,
      clippingPlan: null
    };
  },

  computed: babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapGetters"])(['viewer', 'currentSceneList'])),
  watch: {},
  mounted: function mounted() {
    document.getElementsByClassName('bisectDiv')[0].style.height = document.documentElement.clientHeight - 150 + 'px';
  },
  beforeDestroy: function beforeDestroy() {
    if (this.clippingPlan) {
      this.clippingPlan.deleteClippingPlane();
    }
  },

  methods: {
    startPm: function startPm(type, title) {
      this.currentType = type;
      this.title = title;
      switch (type) {
        case 'z':
          this.xSlider = 0;
          this.ySlider = 0;
          this.zSlider = -1;
          this.dSlider = 0;
          break;
        case 'y':
          this.xSlider = 0;
          this.ySlider = -1;
          this.zSlider = 0;
          this.dSlider = 0;
          break;

        case 'x':
          this.xSlider = -1;
          this.ySlider = 0;
          this.zSlider = 0;
          this.dSlider = 0;
          break;

        case 'zdy':
          this.xSlider = 0;
          this.ySlider = 0;
          this.zSlider = 0;
          this.dSlider = 0;
          break;
      }
      if (this.isStart) {
        this.startMeasure();
      }
    },
    startMeasure: function startMeasure() {
      this.isStart = true;
      if (this.clippingPlan) {
        this.clippingPlan.deleteClippingPlane();
        // this.clippingPlan.setPosition('center')
      }
      this.clippingPlan = this.clippingPlaneOnClick(this.xSlider, this.ySlider, this.zSlider, this.dSlider);
      this.clippingPlan.setColorAndOpacity(null, 0);
    },
    quitMeasure: function quitMeasure() {
      this.isStart = false;
      this.lastClippingPlanCenter = null;
      this.currentClippingPlanCenter = null;
      this.clippingPlan.deleteClippingPlane();
    },
    switchClip: function switchClip() {
      this.xSlider = -this.xSlider;
      this.ySlider = -this.ySlider;
      this.zSlider = -this.zSlider;
      this.startMeasure();
    },

    // 开始剖面
    clippingPlaneOnClick: function clippingPlaneOnClick(x, y, z, d) {
      var box = this.viewer.getScenesBox(this.currentSceneList);
      var sceneMax = box.max;
      var sceneMin = box.min;
      var max = new THREE.Vector3().copy(sceneMax);
      var length = max.sub(sceneMin).length();
      var sceneCenter = null;
      var clippingPlaneDirect = new THREE.Vector3(x, y, z);
      if (length < 100) length = 100;
      sceneCenter = new THREE.Vector3().lerpVectors(sceneMax, sceneMin, 0.5); // 场景中心点
      var result = null;
      if (this.currentType === 'zdy') {
        this.lastClippingPlanCenter = this.currentClippingPlanCenter || sceneCenter;
        if (d) {
          this.currentClippingPlanCenter = this.clippingPlanCenter(this.lastClippingPlanCenter, clippingPlaneDirect, d);
          result = this.viewer.addClippingPlane(this.currentClippingPlanCenter, clippingPlaneDirect, length, length);
        } else {
          result = this.viewer.addClippingPlane(this.lastClippingPlanCenter, clippingPlaneDirect, length, length);
        }
      } else {
        this.filpClippingPlanCenter = this.clippingPlanCenter(sceneCenter, clippingPlaneDirect, d);
        result = this.viewer.addClippingPlane(this.filpClippingPlanCenter, clippingPlaneDirect, length, length);
      }
      return result;
    },
    clippingPlanCenter: function clippingPlanCenter(sceneCenter, clippingPlanDirect, distanceFromSceneCenter) {
      if (!(clippingPlanDirect instanceof THREE.Vector3)) throw console.error('clippingPlanDirect need three vector3');
      clippingPlanDirect = clippingPlanDirect.normalize();
      return new THREE.Vector3().add(sceneCenter, new THREE.Vector3().copy(clippingPlanDirect).multiplyScalar(distanceFromSceneCenter));
    }
  }
});

/***/ }),

/***/ "sUqz":
/*!**************************************************************************************************!*\
  !*** ./src/views/project/BIM/detailedModel/components/bisect.vue?vue&type=template&id=fa2f0456& ***!
  \**************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib??vue-loader-options!./bisect.vue?vue&type=template&id=fa2f0456& */ "H0s4");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_bisect_vue_vue_type_template_id_fa2f0456___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ })

}]);